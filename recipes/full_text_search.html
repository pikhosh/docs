<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.42">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" type="image/png" sizes="256x256" href="/icon-256x256.png"><link rel="icon" type="image/png" sizes="512x512" href="/icon-512x512.png"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@800&display=swap"><meta name="application-name" content="Isar Database"><meta name="apple-mobile-web-app-title" content="Isar Database"><meta name="apple-mobile-web-app-status-bar-style" content="black"><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-NX9QJRWFGX"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-NX9QJRWFGX');</script><script>(function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
      })(window, document, "clarity", "script", "ciawnmxjdh");</script><title>Full-text search | Isar Database</title><meta name="description" content="Super Fast Cross Platform Database for Flutter">
    <link rel="modulepreload" href="/assets/app.c5ce3f59.js"><link rel="modulepreload" href="/assets/full_text_search.html.4b31ede5.js"><link rel="modulepreload" href="/assets/full_text_search.html.0ed7316d.js"><link rel="prefetch" href="/assets/index.html.58da7fd7.js"><link rel="prefetch" href="/assets/crud.html.624848ff.js"><link rel="prefetch" href="/assets/faq.html.3b724f41.js"><link rel="prefetch" href="/assets/indexes.html.e1b67878.js"><link rel="prefetch" href="/assets/limitations.html.bae8f7fb.js"><link rel="prefetch" href="/assets/links.html.bcd0eb20.js"><link rel="prefetch" href="/assets/queries.html.b2e65d0d.js"><link rel="prefetch" href="/assets/schema.html.0d8c3332.js"><link rel="prefetch" href="/assets/transactions.html.8296b524.js"><link rel="prefetch" href="/assets/type_converters.html.e4654c92.js"><link rel="prefetch" href="/assets/watchers.html.6f9711c4.js"><link rel="prefetch" href="/assets/multi_isolate.html.8621aa2d.js"><link rel="prefetch" href="/assets/update_widget_on_change.html.4c39dc4b.js"><link rel="prefetch" href="/assets/contacts_app.html.db2e72ab.js"><link rel="prefetch" href="/assets/quickstart.html.ff29ee7c.js"><link rel="prefetch" href="/assets/404.html.f166316b.js"><link rel="prefetch" href="/assets/index.html.a45bd610.js"><link rel="prefetch" href="/assets/crud.html.22f0e843.js"><link rel="prefetch" href="/assets/faq.html.49208e5d.js"><link rel="prefetch" href="/assets/indexes.html.7ccb41c5.js"><link rel="prefetch" href="/assets/limitations.html.5a57c3cf.js"><link rel="prefetch" href="/assets/links.html.d81bf864.js"><link rel="prefetch" href="/assets/queries.html.9c734208.js"><link rel="prefetch" href="/assets/schema.html.5d3d0bbf.js"><link rel="prefetch" href="/assets/transactions.html.20d32c71.js"><link rel="prefetch" href="/assets/type_converters.html.e1377f41.js"><link rel="prefetch" href="/assets/watchers.html.fa99a0d1.js"><link rel="prefetch" href="/assets/multi_isolate.html.d5faac6a.js"><link rel="prefetch" href="/assets/update_widget_on_change.html.779a6a61.js"><link rel="prefetch" href="/assets/contacts_app.html.b0a11afc.js"><link rel="prefetch" href="/assets/quickstart.html.3226843d.js"><link rel="prefetch" href="/assets/404.html.cdf61af1.js"><link rel="prefetch" href="/assets/404.15179968.js"><link rel="prefetch" href="/assets/Layout.a0c6f1a9.js">
    <link rel="stylesheet" href="/assets/style.a60c2f76.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/isar.svg" alt="Isar Database"><span class="site-name can-hide">Isar Database</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a class="external-link" href="https://pub.dev/packages/isar" rel="noopener noreferrer" target="_blank" aria-label="pub.dev"><!--[--><!--]--> pub.dev <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://pub.dev/documentation/isar/latest/isar/isar-library.html" rel="noopener noreferrer" target="_blank" aria-label="API"><!--[--><!--]--> API <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/isar/isar" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a class="external-link" href="https://pub.dev/packages/isar" rel="noopener noreferrer" target="_blank" aria-label="pub.dev"><!--[--><!--]--> pub.dev <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://pub.dev/documentation/isar/latest/isar/isar-library.html" rel="noopener noreferrer" target="_blank" aria-label="API"><!--[--><!--]--> API <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/isar/isar" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">TUTORIALS <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/tutorials/quickstart.md" class="sidebar-item" aria-label="Quickstart"><!--[--><!--]--> Quickstart <!--[--><!--]--></a><!----></li><li><a href="/tutorials/contacts_app.md" class="sidebar-item" aria-label="Contacts App"><!--[--><!--]--> Contacts App <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">CONCEPTS <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/schema.html" class="sidebar-item" aria-label="Schema"><!--[--><!--]--> Schema <!--[--><!--]--></a><!----></li><li><a href="/crud.html" class="sidebar-item" aria-label="Create, Read, Update, Delete"><!--[--><!--]--> Create, Read, Update, Delete <!--[--><!--]--></a><!----></li><li><a href="/queries.html" class="sidebar-item" aria-label="Queries"><!--[--><!--]--> Queries <!--[--><!--]--></a><!----></li><li><a href="/transactions.html" class="sidebar-item" aria-label="Transactions"><!--[--><!--]--> Transactions <!--[--><!--]--></a><!----></li><li><a href="/indexes.html" class="sidebar-item" aria-label="Indexes"><!--[--><!--]--> Indexes <!--[--><!--]--></a><!----></li><li><a href="/links.html" class="sidebar-item" aria-label="Links"><!--[--><!--]--> Links <!--[--><!--]--></a><!----></li><li><a href="/watchers.html" class="sidebar-item" aria-label="Watchers"><!--[--><!--]--> Watchers <!--[--><!--]--></a><!----></li><li><a href="/type_converters.html" class="sidebar-item" aria-label="Type Converters"><!--[--><!--]--> Type Converters <!--[--><!--]--></a><!----></li><li><a href="/limitations.html" class="sidebar-item" aria-label="Limitations"><!--[--><!--]--> Limitations <!--[--><!--]--></a><!----></li><li><a href="/faq.html" class="sidebar-item" aria-label="FAQ"><!--[--><!--]--> FAQ <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">RECIPES <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/recipes/full_text_search.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Full-text search"><!--[--><!--]--> Full-text search <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/recipes/full_text_search.html#why-is-full-text-search-useful" class="router-link-active router-link-exact-active sidebar-item" aria-label="Why is full-text search useful?"><!--[--><!--]--> Why is full-text search useful? <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/recipes/full_text_search.html#basic-example" class="router-link-active router-link-exact-active sidebar-item" aria-label="Basic example"><!--[--><!--]--> Basic example <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/recipes/full_text_search.html#splitting-text-the-right-way" class="router-link-active router-link-exact-active sidebar-item" aria-label="Splitting text the right way"><!--[--><!--]--> Splitting text the right way <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/recipes/full_text_search.html#i-want-more-control" class="router-link-active router-link-exact-active sidebar-item" aria-label="I want more control"><!--[--><!--]--> I want more control <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/recipes/full_text_search.html#i-also-need-endswith" class="router-link-active router-link-exact-active sidebar-item" aria-label="I also need .endsWith()"><!--[--><!--]--> I also need .endsWith() <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/recipes/full_text_search.html#stemming-algorithms" class="router-link-active router-link-exact-active sidebar-item" aria-label="Stemming algorithms"><!--[--><!--]--> Stemming algorithms <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/recipes/full_text_search.html#phonetic-algorithms" class="router-link-active router-link-exact-active sidebar-item" aria-label="Phonetic algorithms"><!--[--><!--]--> Phonetic algorithms <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a href="/recipes/multi_isolate.html" class="sidebar-item" aria-label="Multi-Isolate usage"><!--[--><!--]--> Multi-Isolate usage <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><a class="external-link sidebar-item sidebar-heading" href="https://github.com/isar/isar/tree/main/examples" rel="noopener noreferrer" target="_blank" aria-label="Sample Apps"><!--[--><!--]--> Sample Apps <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="full-text-search" tabindex="-1"><a class="header-anchor" href="#full-text-search" aria-hidden="true">#</a> Full-text search</h1><p>Full-text search is a powerful way to search text in the database. You should already be familiar with how <a href="/indexes">indexes</a> work, but let&#39;s go over the basics.</p><p>An index works like a lookup table that allows the query engine to quickly find records with a given value. For example, if you have a <code>title</code> field in your object, you can create an index on that field to make it faster to find objects with a given title.</p><h2 id="why-is-full-text-search-useful" tabindex="-1"><a class="header-anchor" href="#why-is-full-text-search-useful" aria-hidden="true">#</a> Why is full-text search useful?</h2><p>You can easily search text using filters. There are various string operations for example <code>.startsWith()</code>, <code>.contains()</code> and <code>.matches()</code>. The problem with filters is that their runtime is <code>O(n)</code> where <code>n</code> is the number of records in the collection. String operations like <code>.matches()</code> are especially expensive.</p><div class="custom-container tip"><p class="custom-container-title">TIP</p><p>Full-text search is much faster than filters but indexes have some limitations. In this recipe we will explore how to work around these limitations.</p></div><h2 id="basic-example" tabindex="-1"><a class="header-anchor" href="#basic-example" aria-hidden="true">#</a> Basic example</h2><p>The idea is always the same: Instead of indexing the whole text, we index the words in the text so we can search for them individually.</p><p>Let&#39;s create the most basic full-text index:</p><div class="language-dart ext-dart"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Post</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">int</span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;"> id;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">late</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> title;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">@Index</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">List</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#C678DD;">get</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">titleWords</span><span style="color:#ABB2BF;"> =&gt; title.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39; &#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre></div><p>We can now search for posts with specific words in the title:</p><div class="language-dart ext-dart"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#C678DD;">final</span><span style="color:#ABB2BF;"> posts </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;"> isar.posts</span></span>
<span class="line"><span style="color:#ABB2BF;">  .</span><span style="color:#61AFEF;">where</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">  .</span><span style="color:#61AFEF;">titleWordsAnyEqualTo</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;hello&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">  .</span><span style="color:#61AFEF;">findAll</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span></code></pre></div><p>This query is super fast but there are some problems:</p><ol><li>We can only search for entire words</li><li>We do not consider punctation</li><li>We do not support other whitespace characters</li></ol><h2 id="splitting-text-the-right-way" tabindex="-1"><a class="header-anchor" href="#splitting-text-the-right-way" aria-hidden="true">#</a> Splitting text the right way</h2><p>Let&#39;s try to improve the previous example. We could try to come up with a complicated regex to fix word splitting but it will likely be slow and wrong for edge cases.</p><p>The <a href="https://unicode.org/reports/tr29/" target="_blank" rel="noopener noreferrer">Unicode Annex #29<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> defines how to split text into words correctly for almost all languages. It is quite complicated but fortunately, Isar does the heavy lifting for us:</p><div class="language-dart ext-dart"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#E5C07B;">Isar</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">splitWords</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;hello world&#39;</span><span style="color:#ABB2BF;">); </span><span style="color:#7F848E;font-style:italic;">// -&gt; [&#39;hello&#39;, &#39;world&#39;]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E5C07B;">Isar</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">splitWords</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;The quick (“brown”) fox can’t jump 32.3 feet, right?&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// -&gt; [&#39;The&#39;, &#39;quick&#39;, &#39;brown&#39;, &#39;fox&#39;, &#39;can’t&#39;, &#39;jump&#39;, &#39;32.3&#39;, &#39;feet&#39;, &#39;right&#39;]</span></span>
<span class="line"></span></code></pre></div><h2 id="i-want-more-control" tabindex="-1"><a class="header-anchor" href="#i-want-more-control" aria-hidden="true">#</a> I want more control</h2><p>Easy peasy! We can change our index to also support prefix matching and case-insensitive matching:</p><div class="language-dart ext-dart"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Post</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">int</span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;"> id;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">late</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> title;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">@Index</span><span style="color:#ABB2BF;">(type</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">IndexType</span><span style="color:#ABB2BF;">.value, caseSensitive</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">List</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#C678DD;">get</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">titleWords</span><span style="color:#ABB2BF;"> =&gt; title.</span><span style="color:#61AFEF;">split</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39; &#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre></div><p>By default Isar will store the words as hashed values. This is a good thing because it is faster and more space efficient. But hashes can&#39;t be used for prefix matching. By using <code>IndexType.value</code>, we can change the index to use the words directly instead. It gives us the <code>.titleWordsAnyStartsWith()</code> where clause:</p><div class="language-dart ext-dart"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#C678DD;">final</span><span style="color:#ABB2BF;"> posts </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;"> isar.posts</span></span>
<span class="line"><span style="color:#ABB2BF;">  .</span><span style="color:#61AFEF;">where</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">  .</span><span style="color:#61AFEF;">titleWordsAnyStartsWith</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;hel&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">  .</span><span style="color:#61AFEF;">or</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">  .</span><span style="color:#61AFEF;">titleWordsAnyStartsWith</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;welco&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">  .</span><span style="color:#61AFEF;">or</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">  .</span><span style="color:#61AFEF;">titleWordsAnyStartsWith</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;howd&#39;</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">  .</span><span style="color:#61AFEF;">findAll</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span></code></pre></div><h2 id="i-also-need-endswith" tabindex="-1"><a class="header-anchor" href="#i-also-need-endswith" aria-hidden="true">#</a> I also need <code>.endsWith()</code></h2><p>Sure thing! We will use a trick to achieve <code>.endsWith()</code> matching:</p><div class="language-dart ext-dart"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#C678DD;">class</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Post</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">int</span><span style="color:#C678DD;">?</span><span style="color:#ABB2BF;"> id;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">late</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;"> title;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">@Index</span><span style="color:#ABB2BF;">(type</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">IndexType</span><span style="color:#ABB2BF;">.value, caseSensitive</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#D19A66;">false</span><span style="color:#ABB2BF;">)</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#E5C07B;">List</span><span style="color:#ABB2BF;">&lt;</span><span style="color:#E5C07B;">String</span><span style="color:#ABB2BF;">&gt; </span><span style="color:#C678DD;">get</span><span style="color:#ABB2BF;"> revTitleWords {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#C678DD;">return</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Isar</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">splitWords</span><span style="color:#ABB2BF;">(title).</span><span style="color:#61AFEF;">map</span><span style="color:#ABB2BF;">((word) =&gt; word.reversed).</span><span style="color:#61AFEF;">toList</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"><span style="color:#ABB2BF;">    }</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre></div><p>Don&#39;t forget to also reverse the ending you want to search for:</p><div class="language-dart ext-dart"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#C678DD;">final</span><span style="color:#ABB2BF;"> posts </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;"> isar.posts</span></span>
<span class="line"><span style="color:#ABB2BF;">  .</span><span style="color:#61AFEF;">where</span><span style="color:#ABB2BF;">()</span></span>
<span class="line"><span style="color:#ABB2BF;">  .</span><span style="color:#61AFEF;">revTitleWordsAnyStartsWith</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;lcome&#39;</span><span style="color:#ABB2BF;">.reversed)</span></span>
<span class="line"><span style="color:#ABB2BF;">  .</span><span style="color:#61AFEF;">findAll</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span></code></pre></div><h2 id="stemming-algorithms" tabindex="-1"><a class="header-anchor" href="#stemming-algorithms" aria-hidden="true">#</a> Stemming algorithms</h2><p>Unfortunately indexes do not support contains matching (this is true for other databases as well). But there are a few alternatives that are worth exploring. It highly depends on your use case which one you choose. You can for example index word stems instead of the full word.</p><p>A stemming algorithm is a process of linguistic normalisation, in which the variant forms of a word are reduced to a common form, for example,</p><div class="language-text ext-text"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#abb2bf;">connection</span></span>
<span class="line"><span style="color:#abb2bf;">connections</span></span>
<span class="line"><span style="color:#abb2bf;">connective          ---&gt;   connect</span></span>
<span class="line"><span style="color:#abb2bf;">connected</span></span>
<span class="line"><span style="color:#abb2bf;">connecting</span></span>
<span class="line"><span style="color:#abb2bf;"></span></span></code></pre></div><p>Popular examples are the <a href="https://tartarus.org/martin/PorterStemmer/" target="_blank" rel="noopener noreferrer">Porter stemming algorithm<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> and the <a href="https://snowballstem.org/algorithms/" target="_blank" rel="noopener noreferrer">Snowball stemming algorithms<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><p>There are also more advanced forms like <a href="https://en.wikipedia.org/wiki/Lemmatisation" target="_blank" rel="noopener noreferrer">lemmatization<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>.</p><h2 id="phonetic-algorithms" tabindex="-1"><a class="header-anchor" href="#phonetic-algorithms" aria-hidden="true">#</a> Phonetic algorithms</h2><p>A <a href="https://en.wikipedia.org/wiki/Phonetic_algorithm" target="_blank" rel="noopener noreferrer">phonetic algorithm<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> is an algorithm for indexing of words by their pronunciation. In other words, it allows you to find words that sound similar to the one you are looking for.</p><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>Most phonetic algorithms only support a single language.</p></div><h3 id="soundex" tabindex="-1"><a class="header-anchor" href="#soundex" aria-hidden="true">#</a> Soundex</h3><p><a href="https://en.wikipedia.org/wiki/Soundex" target="_blank" rel="noopener noreferrer">Soundex<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> is a phonetic algorithm for indexing names by sound, as pronounced in English. The goal is for homophones to be encoded to the same representation so that they can be matched despite minor differences in spelling. It is a very simple algorithm and there are multiple improved versions.</p><p>Using this algorithm, both <code>&quot;Robert&quot;</code> and <code>&quot;Rupert&quot;</code> return the same string <code>&quot;R163&quot;</code> while <code>&quot;Rubin&quot;</code> yields <code>&quot;R150&quot;</code>. <code>&quot;Ashcraft&quot;</code> and <code>&quot;Ashcroft&quot;</code> both yield <code>&quot;A261&quot;</code>.</p><h3 id="double-metaphone" tabindex="-1"><a class="header-anchor" href="#double-metaphone" aria-hidden="true">#</a> Double Metaphone</h3><p>The <a href="https://en.wikipedia.org/wiki/Metaphone" target="_blank" rel="noopener noreferrer">Double Metaphone<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> phonetic encoding algorithm is the second generation of this algorithm. It makes a number of fundamental design improvements over the original Metaphone algorithm.</p><p>Double Metaphone tries to account for myriad irregularities in English of Slavic, Germanic, Celtic, Greek, French, Italian, Spanish, Chinese, and other origins.</p><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/isar/docs/edit/main/docs/recipes/full_text_search.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: simonleier@gmail.com">Simon Leier</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><!----><span class="next"><a href="/recipes/multi_isolate.html" class="" aria-label="Multi-Isolate usage"><!--[--><!--]--> Multi-Isolate usage <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.c5ce3f59.js" defer></script>
  </body>
</html>
