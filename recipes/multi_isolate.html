<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.42">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <link rel="icon" type="image/png" sizes="256x256" href="/icon-256x256.png"><link rel="icon" type="image/png" sizes="512x512" href="/icon-512x512.png"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@800&display=swap"><meta name="application-name" content="Isar Database"><meta name="apple-mobile-web-app-title" content="Isar Database"><meta name="apple-mobile-web-app-status-bar-style" content="black"><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-NX9QJRWFGX"></script><script>window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());
            gtag('config', 'G-NX9QJRWFGX');</script><script>(function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
      })(window, document, "clarity", "script", "ciawnmxjdh");</script><title>Multi-Isolate usage | Isar Database</title><meta name="description" content="Super Fast Cross Platform Database for Flutter">
    <link rel="modulepreload" href="/assets/app.c5ce3f59.js"><link rel="modulepreload" href="/assets/multi_isolate.html.d5faac6a.js"><link rel="modulepreload" href="/assets/multi_isolate.html.8621aa2d.js"><link rel="prefetch" href="/assets/index.html.58da7fd7.js"><link rel="prefetch" href="/assets/crud.html.624848ff.js"><link rel="prefetch" href="/assets/faq.html.3b724f41.js"><link rel="prefetch" href="/assets/indexes.html.e1b67878.js"><link rel="prefetch" href="/assets/limitations.html.bae8f7fb.js"><link rel="prefetch" href="/assets/links.html.bcd0eb20.js"><link rel="prefetch" href="/assets/queries.html.b2e65d0d.js"><link rel="prefetch" href="/assets/schema.html.0d8c3332.js"><link rel="prefetch" href="/assets/transactions.html.8296b524.js"><link rel="prefetch" href="/assets/type_converters.html.e4654c92.js"><link rel="prefetch" href="/assets/watchers.html.6f9711c4.js"><link rel="prefetch" href="/assets/full_text_search.html.0ed7316d.js"><link rel="prefetch" href="/assets/update_widget_on_change.html.4c39dc4b.js"><link rel="prefetch" href="/assets/contacts_app.html.db2e72ab.js"><link rel="prefetch" href="/assets/quickstart.html.ff29ee7c.js"><link rel="prefetch" href="/assets/404.html.f166316b.js"><link rel="prefetch" href="/assets/index.html.a45bd610.js"><link rel="prefetch" href="/assets/crud.html.22f0e843.js"><link rel="prefetch" href="/assets/faq.html.49208e5d.js"><link rel="prefetch" href="/assets/indexes.html.7ccb41c5.js"><link rel="prefetch" href="/assets/limitations.html.5a57c3cf.js"><link rel="prefetch" href="/assets/links.html.d81bf864.js"><link rel="prefetch" href="/assets/queries.html.9c734208.js"><link rel="prefetch" href="/assets/schema.html.5d3d0bbf.js"><link rel="prefetch" href="/assets/transactions.html.20d32c71.js"><link rel="prefetch" href="/assets/type_converters.html.e1377f41.js"><link rel="prefetch" href="/assets/watchers.html.fa99a0d1.js"><link rel="prefetch" href="/assets/full_text_search.html.4b31ede5.js"><link rel="prefetch" href="/assets/update_widget_on_change.html.779a6a61.js"><link rel="prefetch" href="/assets/contacts_app.html.b0a11afc.js"><link rel="prefetch" href="/assets/quickstart.html.3226843d.js"><link rel="prefetch" href="/assets/404.html.cdf61af1.js"><link rel="prefetch" href="/assets/404.15179968.js"><link rel="prefetch" href="/assets/Layout.a0c6f1a9.js">
    <link rel="stylesheet" href="/assets/style.a60c2f76.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/" class=""><img class="logo" src="/isar.svg" alt="Isar Database"><span class="site-name can-hide">Isar Database</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a class="external-link" href="https://pub.dev/packages/isar" rel="noopener noreferrer" target="_blank" aria-label="pub.dev"><!--[--><!--]--> pub.dev <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://pub.dev/documentation/isar/latest/isar/isar-library.html" rel="noopener noreferrer" target="_blank" aria-label="API"><!--[--><!--]--> API <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/isar/isar" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-dark-button" title="toggle dark mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a class="external-link" href="https://pub.dev/packages/isar" rel="noopener noreferrer" target="_blank" aria-label="pub.dev"><!--[--><!--]--> pub.dev <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://pub.dev/documentation/isar/latest/isar/isar-library.html" rel="noopener noreferrer" target="_blank" aria-label="API"><!--[--><!--]--> API <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/isar/isar" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">TUTORIALS <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/tutorials/quickstart.md" class="sidebar-item" aria-label="Quickstart"><!--[--><!--]--> Quickstart <!--[--><!--]--></a><!----></li><li><a href="/tutorials/contacts_app.md" class="sidebar-item" aria-label="Contacts App"><!--[--><!--]--> Contacts App <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading">CONCEPTS <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/schema.html" class="sidebar-item" aria-label="Schema"><!--[--><!--]--> Schema <!--[--><!--]--></a><!----></li><li><a href="/crud.html" class="sidebar-item" aria-label="Create, Read, Update, Delete"><!--[--><!--]--> Create, Read, Update, Delete <!--[--><!--]--></a><!----></li><li><a href="/queries.html" class="sidebar-item" aria-label="Queries"><!--[--><!--]--> Queries <!--[--><!--]--></a><!----></li><li><a href="/transactions.html" class="sidebar-item" aria-label="Transactions"><!--[--><!--]--> Transactions <!--[--><!--]--></a><!----></li><li><a href="/indexes.html" class="sidebar-item" aria-label="Indexes"><!--[--><!--]--> Indexes <!--[--><!--]--></a><!----></li><li><a href="/links.html" class="sidebar-item" aria-label="Links"><!--[--><!--]--> Links <!--[--><!--]--></a><!----></li><li><a href="/watchers.html" class="sidebar-item" aria-label="Watchers"><!--[--><!--]--> Watchers <!--[--><!--]--></a><!----></li><li><a href="/type_converters.html" class="sidebar-item" aria-label="Type Converters"><!--[--><!--]--> Type Converters <!--[--><!--]--></a><!----></li><li><a href="/limitations.html" class="sidebar-item" aria-label="Limitations"><!--[--><!--]--> Limitations <!--[--><!--]--></a><!----></li><li><a href="/faq.html" class="sidebar-item" aria-label="FAQ"><!--[--><!--]--> FAQ <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><li><p tabindex="0" class="sidebar-item sidebar-heading active">RECIPES <!----></p><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a href="/recipes/full_text_search.html" class="sidebar-item" aria-label="Full-text search"><!--[--><!--]--> Full-text search <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/recipes/multi_isolate.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="Multi-Isolate usage"><!--[--><!--]--> Multi-Isolate usage <!--[--><!--]--></a><!--[--><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/recipes/multi_isolate.html#when-to-use-multiple-isolates" class="router-link-active router-link-exact-active sidebar-item" aria-label="When to use multiple isolates"><!--[--><!--]--> When to use multiple isolates <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/recipes/multi_isolate.html#example" class="router-link-active router-link-exact-active sidebar-item" aria-label="Example"><!--[--><!--]--> Example <!--[--><!--]--></a><!----></li><!--]--></ul><!--]--></li><!--]--></ul><!--]--></li><li><a class="external-link sidebar-item sidebar-heading" href="https://github.com/isar/isar/tree/main/examples" rel="noopener noreferrer" target="_blank" aria-label="Sample Apps"><!--[--><!--]--> Sample Apps <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><h1 id="multi-isolate-usage" tabindex="-1"><a class="header-anchor" href="#multi-isolate-usage" aria-hidden="true">#</a> Multi-Isolate usage</h1><p>Instead of threads, all Dart code runs inside of isolates. Each isolate has its own memory heap, ensuring that none of the state in an isolate is accessible from any other isolate.</p><p>Isar can be accessed from multiple isolates at the same time and even watchers work across isolates. In this recipe we will check out how to use Isar in a multi-isolate environment.</p><h2 id="when-to-use-multiple-isolates" tabindex="-1"><a class="header-anchor" href="#when-to-use-multiple-isolates" aria-hidden="true">#</a> When to use multiple isolates</h2><p>Isar transactions are executed in parallel even if they run in the same isolate. In some cases it is still beneficial to access Isar from multiple isolates.</p><p>The reason is that Isar spends quite some time on encoding and decoding data from and to Dart objects. You can think of it like encoding and decoding JSON (just more efficient). These operations run inside the isolate from which the data is accessed and naturally block other code in the isolate. In other words: Isar performs some of the work in your Dart isolate.</p><p>If you only need to read or write a few hundred objects at once, it is fine to do it in the UI isolate. But if you have huge transactions or the UI thread is already busy, you should consider using a separate isolate.</p><h2 id="example" tabindex="-1"><a class="header-anchor" href="#example" aria-hidden="true">#</a> Example</h2><p>The first thing we need to do is to open Isar in the new isolate. Since the instance of Isar is already open in the main isolate, <code>Isar.open()</code> will return the same instance.</p><p><code>compute()</code> starts a new isolate in Flutter and runs the given function in it.</p><div class="language-dart ext-dart"><pre class="shiki" style="background-color:#282c34;"><code><span class="line"><span style="color:#C678DD;">void</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">main</span><span style="color:#ABB2BF;">() {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">final</span><span style="color:#ABB2BF;"> dir </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">getApplicationSupportDirectory</span><span style="color:#ABB2BF;">();</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// Open Isar in the UI isolate</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">final</span><span style="color:#ABB2BF;"> isar </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Isar</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">open</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">        name</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;myInstance&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        schemas</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> [</span><span style="color:#E5C07B;">PostSchema</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#ABB2BF;">        path</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> dir.path,</span></span>
<span class="line"><span style="color:#ABB2BF;">    );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// listen to changes in the database</span></span>
<span class="line"><span style="color:#ABB2BF;">    isar.posts.</span><span style="color:#61AFEF;">watchLazy</span><span style="color:#ABB2BF;">(() {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">print</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;omg the posts changed!&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// start a new isolate and create 10000 posts</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#61AFEF;">compute</span><span style="color:#ABB2BF;">(createDummyPosts, </span><span style="color:#D19A66;">10000</span><span style="color:#ABB2BF;">).</span><span style="color:#61AFEF;">then</span><span style="color:#ABB2BF;">(() {</span></span>
<span class="line"><span style="color:#ABB2BF;">        </span><span style="color:#61AFEF;">print</span><span style="color:#ABB2BF;">(</span><span style="color:#98C379;">&#39;isolate finished&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// after some time:</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// &gt; omg the posts changed!</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// &gt; isolate finished</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#7F848E;font-style:italic;">// function that will be executed in the new isolate</span></span>
<span class="line"><span style="color:#E5C07B;">Future</span><span style="color:#ABB2BF;"> </span><span style="color:#61AFEF;">createDummyPosts</span><span style="color:#ABB2BF;">(</span><span style="color:#E5C07B;">int</span><span style="color:#ABB2BF;"> count) </span><span style="color:#C678DD;">async</span><span style="color:#ABB2BF;"> {</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// we don&#39;t need the path here because the instance is already open</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">final</span><span style="color:#ABB2BF;"> isar </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#C678DD;">await</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">Isar</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">open</span><span style="color:#ABB2BF;">(</span></span>
<span class="line"><span style="color:#ABB2BF;">        name</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;myInstance&#39;</span><span style="color:#ABB2BF;">,</span></span>
<span class="line"><span style="color:#ABB2BF;">        schemas</span><span style="color:#C678DD;">:</span><span style="color:#ABB2BF;"> [</span><span style="color:#E5C07B;">PostSchema</span><span style="color:#ABB2BF;">],</span></span>
<span class="line"><span style="color:#ABB2BF;">    );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#C678DD;">final</span><span style="color:#ABB2BF;"> posts </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#E5C07B;">List</span><span style="color:#ABB2BF;">.</span><span style="color:#61AFEF;">generate</span><span style="color:#ABB2BF;">(count, (i) =&gt; </span><span style="color:#E5C07B;">Post</span><span style="color:#ABB2BF;">()..title </span><span style="color:#56B6C2;">=</span><span style="color:#ABB2BF;"> </span><span style="color:#98C379;">&#39;Post $</span><span style="color:#E06C75;font-style:italic;">i</span><span style="color:#98C379;">&#39;</span><span style="color:#ABB2BF;">);</span></span>
<span class="line"><span style="color:#ABB2BF;">    </span><span style="color:#7F848E;font-style:italic;">// we use a synchronous transactions in isolates</span></span>
<span class="line"><span style="color:#ABB2BF;">    isar.</span><span style="color:#61AFEF;">writeTxnSync</span><span style="color:#ABB2BF;">((isar) {</span></span>
<span class="line"><span style="color:#ABB2BF;">        isar.posts.</span><span style="color:#61AFEF;">insertAllSync</span><span style="color:#ABB2BF;">(posts);</span></span>
<span class="line"><span style="color:#ABB2BF;">    });</span></span>
<span class="line"><span style="color:#ABB2BF;">}</span></span>
<span class="line"></span></code></pre></div><p>There are a few interesting things to note in the example above:</p><ul><li><code>isar.posts.watchLazy()</code> is called in the UI isolate and is notified even if the posts are changed in another isolate.</li><li>We did not need to specify the path of the instance because it is already open in the main isolate.</li><li>Instances are referenced by name. The default name is <code>isar</code> but in this example we set it to <code>myInstance</code>.</li><li>We used a synchronous transaction to create the posts. Blocking our new isolate is no problem and synchronous transactions are a little faster.</li></ul><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/isar/docs/edit/main/docs/recipes/multi_isolate.md" rel="noopener noreferrer" target="_blank" aria-label="Edit this page"><!--[--><!--]--> Edit this page <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: simonleier@gmail.com">Simon Leier</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: 39679158+TechieBlossom@users.noreply.github.com">Prateek Sharma</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><span class="prev"><a href="/recipes/full_text_search.html" class="" aria-label="Full-text search"><!--[--><!--]--> Full-text search <!--[--><!--]--></a></span><!----></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/assets/app.c5ce3f59.js" defer></script>
  </body>
</html>
